{% extends 'portais/corporativo/base.html' %}
{% load static %}

{% block title %}Contato | Wall Club{% endblock %}

{% block extra_css %}
<style>
    .contact-info-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }
    
    .contact-item {
        flex: 0 0 30%;
        margin-bottom: 15px;
    }
    
    @media (max-width: 767px) {
        .contact-info-container {
            display: block;
        }
        
        .contact-item {
            width: 100%;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .contact-item > div {
            display: inline-flex !important;
            text-align: left;
        }
    }
</style>
{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text" style="text-align: center;">
                    <h1 class="hero-title">Fale com a Wall</h1>
                    <p class="hero-subtitle">Estamos aqui para ajudar. Preencha o formulário abaixo e entraremos em contato em breve.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Contact Section -->
    <section class="features">
        <div class="container">
            <div class="content-block">
                <div class="row g-4">
                    <!-- Formulário à esquerda (aparece primeiro no mobile) -->
                    <div class="col-lg-8">
                        <div class="contact-form-container p-4">
                            <h3 class="mb-4" style="color: #333; font-weight: 600;">Envie sua mensagem</h3>
                            <p class="mb-4">Se você é um Comerciante ou Lojista e quer entrar para o WallClub ou se você é um Consumidor e quer conhecer melhor nossos benefícios, preencha o formulário abaixo.</p>
                            
                            <form id="contactForm" method="POST" class="contact-form">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mb-4">
                                            <label for="name" style="font-weight: 500; margin-bottom: 8px; display: block;">Nome completo</label>
                                            <input type="text" id="name" name="name" style="width: 100%; max-width: 400px; height: 55px; border-radius: 8px; border: 1px solid #ddd; font-size: 16px; padding: 10px 15px;" required>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="form-group mb-4">
                                            <label for="email" style="font-weight: 500; margin-bottom: 8px; display: block;">Email</label>
                                            <input type="email" id="email" name="email" style="width: 100%; max-width: 400px; height: 55px; border-radius: 8px; border: 1px solid #ddd; font-size: 16px; padding: 10px 15px;" required>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mb-4">
                                            <label for="phone" style="font-weight: 500; margin-bottom: 8px; display: block;">Telefone</label>
                                            <input type="tel" id="phone" name="phone" style="width: 100%; max-width: 400px; height: 55px; border-radius: 8px; border: 1px solid #ddd; font-size: 16px; padding: 10px 15px;" required>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="form-group mb-4">
                                            <label for="type" style="font-weight: 500; margin-bottom: 8px; display: block;">Você é:</label>
                                            <select id="type" name="type" style="width: 100%; max-width: 400px; height: 55px; border-radius: 8px; border: 1px solid #ddd; font-size: 16px; padding: 10px 15px; background-color: #fff;" required>
                                                <option value="">Selecione uma opção</option>
                                                <option value="consumer">Consumidor</option>
                                                <option value="merchant">Lojista/Comerciante</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group mb-4">
                                    <label for="message" style="font-weight: 500; margin-bottom: 8px; display: block;">Mensagem</label>
                                    <textarea id="message" name="message" style="width: 100%; max-width: 850px; min-height: 180px; border-radius: 8px; border: 1px solid #ddd; font-size: 16px; padding: 15px; resize: vertical;" rows="6" required></textarea>
                                </div>
                                
                                <div style="text-align: right;">
                                    <button type="submit" class="btn cta-btn" style="padding: 14px 35px; font-weight: 600; font-size: 16px; background-color: #FF5722; color: white; border: none; border-radius: 8px;">Enviar mensagem</button>
                                </div>
                                
                                <!-- Mensagem de feedback após envio -->
                                <div id="formMessage" class="mt-3" style="display: none; padding: 15px; border-radius: 8px; text-align: center; font-weight: 500;"></div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Informações de contato à direita -->
                    <div class="col-lg-4">
                        <div style="background-color: #f8f9fa; border-radius: 10px; height: 100%; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                            <h3 style="color: #333; font-weight: 600; margin-bottom: 25px;">Informações de Contato</h3>
                            
                            <!-- Informações de contato com layout responsivo -->
                            <div class="contact-info-container">
                                <!-- Email -->
                                <div class="contact-item">
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="width: 40px; height: 40px; background-color: #0066cc; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px; flex-shrink: 0;">
                                            <i class="fas fa-envelope" style="color: white; font-size: 16px;"></i>
                                        </div>
                                        <div>
                                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 5px;">Email</h5>
                                            <p style="margin-bottom: 0; font-size: 8px;">atendimento@wallclub.com.br</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Endereço -->
                                <div class="contact-item">
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="width: 40px; height: 40px; background-color: #0066cc; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px; flex-shrink: 0;">
                                            <i class="fas fa-map-marker-alt" style="color: white; font-size: 16px;"></i>
                                        </div>
                                        <div>
                                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 5px;">Endereço</h5>
                                            <p style="margin-bottom: 0; font-size: 13px;">Av. Paulista, 726<br>18º Andar - Cj 1807</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Horário -->
                                <div class="contact-item">
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="width: 40px; height: 40px; background-color: #0066cc; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px; flex-shrink: 0;">
                                            <i class="fas fa-clock" style="color: white; font-size: 16px;"></i>
                                        </div>
                                        <div>
                                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 5px;">Horário</h5>
                                            <p style="margin-bottom: 0; font-size: 13px;">Seg-Sex: 9:00-18:00<br>Sáb/Dom: Via chat</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('contactForm');
        const formMessage = document.getElementById('formMessage');
        
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(form);
            const submitButton = form.querySelector('button[type="submit"]');
            
            // Desabilitar botão durante envio
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
            
            // Enviar formulário via fetch
            fetch('{% url "portais_corporativo:contato" %}', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    formMessage.className = 'mt-3 alert-success';
                    formMessage.textContent = data.message;
                    formMessage.style.display = 'block';
                    form.reset();
                    
                    // Esconder mensagem após 5 segundos
                    setTimeout(() => {
                        formMessage.style.display = 'none';
                    }, 5000);
                } else {
                    formMessage.className = 'mt-3 alert-danger';
                    formMessage.textContent = data.message || 'Erro ao enviar mensagem. Tente novamente.';
                    formMessage.style.display = 'block';
                }
            })
            .catch(error => {
                formMessage.className = 'mt-3 alert-danger';
                formMessage.textContent = 'Erro ao enviar mensagem. Por favor, tente novamente.';
                formMessage.style.display = 'block';
            })
            .finally(() => {
                // Reabilitar botão
                submitButton.disabled = false;
                submitButton.innerHTML = 'Enviar mensagem';
                
                // Rolar para a mensagem
                formMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
        });
    });
</script>
{% endblock %}
